
<div class="row" style="margin-top:20px;">
    <div class="col-md-4" style="padding-right:40px;">
        <div class="row">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">Dodaj nowy plik do aktualnego folderu</h3>
                </div>
                <div class="panel-body">
                    @if(ViewBag.FileUploadErrorOccured != null)
                    {
                        <div class="alert alert-danger alert-dismissible" role="alert">
                            @ViewBag.FileUploadErrorMessage
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        </div>
                    }

                    @using (Html.BeginForm("AddFile", "Files", FormMethod.Post, new { enctype = "multipart/form-data" }))
                    {
                    @Html.AntiForgeryToken()
                    <div class="form-group">
                        <div class="input-group">
                            <input type="file" name="file" />
                            <input type="hidden" name="fileFolderID" value="@ViewBag.CurrentDirectoryID" />
                            <input type="hidden" name="accessType" value="1" />
                            <input type="hidden" name="permission" value="7" />
                        </div>
                    </div>
                    <button class="btn btn-success">Wyślij</button>
                    }
                </div>
            </div>
        </div>
        <div class="row">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">Utworzu nowy folder w aktualnym katalogu</h3>
                </div>
                <div class="panel-body">
                    @using (Html.BeginForm("AddDirectory", "Directories", FormMethod.Post))
                    {
                    @Html.AntiForgeryToken()
                    <div class="form-group">
                        <div class="input-group">
                            <label for="newDirectory-name-input">Nazwa folderu</label>
                            <input type="text" name="directoryName" id="newDirectory-name-input" class="form-control"/>
                            <input type="hidden" name="upperDirId" value="@ViewBag.CurrentDirectoryID" />
                            <input type="hidden" name="accessType" value="1" />
                            <input type="hidden" name="permission" value="7" />
                        </div>
                    </div>
                    <button class="btn btn-success">Wyślij</button>
                    }
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-8">
        <div class="row">
            <div class="panel panel-default">
                <!-- Default panel contents -->
                <div class="panel-heading">
                    <h3 class="panel-title">Twoje foldery</h3>
                </div>
                <!-- Table -->
                <table class="table table-hover">
                    <tr>
                        <th>Nazwa</th>
                        <th>Typ dostępu</th>
                        <th>Uprawnienia</th>
                        <th>Operacje</th>
                    </tr>
                    @if(ViewBag.ParentFolderID != null)
                    {
                    <tr>
                        <td>@Html.ActionLink("Folder wyżej", "goToHigherFolder")</td>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    }
                    @using FTPClient.Controllers
                    @foreach (var directory in ViewBag.userDirectories as List<DirData>) {
                    <tr>
                        <td>
                            
                            @directory.dir.Name
                        </td>
                        <td>
                            @directory.dirAccess.AccessType
                        </td>
                        <td>
                            @if((directory.dirAccess.Permissions & 4) == 4)
                            {
                                <text>r</text>
                            }
                            else
                            {
                                <text>-</text>
                            }
                            @if((directory.dirAccess.Permissions & 2) == 2)
                            {
                                <text>w</text>
                            }    
                            else
                            {
                                <text>-</text>
                            }
                            @if((directory.dirAccess.Permissions & 1) == 1)
                            {
                                <text>x</text>
                            }
                            else
                            {
                                <text>-</text>
                            }
                        </td>
                        <td>
                            @Html.ActionLink("Zmień nazwę", "Edit", "Directories",null, new { id=directory.dir.Id }) |
                            @Html.ActionLink("Usuń", "Delete", "Directories",null, new { id=directory.dir.Id })
                        </td>
                    </tr>
                    }
                </table>
            </div>
        </div>
        <div class="row">
            <div class="panel panel-default">
                <!-- Default panel contents -->
                <div class="panel-heading">
                    <h3 class="panel-title">Twoje pliki</h3>
                </div>
                <table class="table table-hover">
                    <tr>
                        <th>Nazwa</th>
                        <th>Rozmiar</th>
                        <th>Typ dostępu</th>
                        <th>Data dodatnia</th>
                        <th>Uprawnienia</th>
                        <th>Operacje</th>
                    </tr>
                    @foreach(var fileStruct in ViewBag.userFiles as List<FileData>)
                    {
                        <tr>
                            <td>@fileStruct.file.Name</td>
                            <td>@fileStruct.file.Size kB</td>
                            <td>@fileStruct.fileAccess.AccessType</td>
                            <td>@fileStruct.file.UploadTime</td>
                            <td>
                                @if((fileStruct.fileAccess.Permissions & 4) == 4)
                                {
                                    <text>r</text>
                                }
                                else
                                {
                                    <text>-</text>
                                }
                                @if((fileStruct.fileAccess.Permissions & 2) == 2)
                                {
                                    <text>w</text>
                                }
                                else
                                {
                                    <text>-</text>
                                }
                                @if((fileStruct.fileAccess.Permissions & 1) == 1)
                                {
                                    <text>x</text>
                                }
                                else
                                {
                                    <text>-</text>
                                }
                            </td>
                            <td>
                                @Html.ActionLink("Zmień nazwę", "Edit","Files",null, new { id=fileStruct.file.Id }) |
                                @Html.ActionLink("Usuń", "Delete", "Files",null,new { id=fileStruct.file.Id })
                            </td>
                        </tr>
                    }
                </table>
            </div>
        </div>
    </div>
</div>


<asp:CalendarExtender ID="ControlIDHere" runat="server" Enabled="True"
                      TargetControlID="TextBoxIDHere" PopupButtonID="CalenderImageIDHere" Format="MM/dd/yyyy">
</asp:CalendarExtender>
